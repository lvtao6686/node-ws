const _0x43dfd9=_0x5980;(function(_0x3c0c09,_0x53f9f8){const _0x325c22=_0x5980,_0x2b789d=_0x3c0c09();while(!![]){try{const _0x3fd02f=parseInt(_0x325c22(0x198))/0x1+parseInt(_0x325c22(0x173))/0x2+parseInt(_0x325c22(0x1c1))/0x3*(parseInt(_0x325c22(0x193))/0x4)+parseInt(_0x325c22(0x195))/0x5*(-parseInt(_0x325c22(0x17a))/0x6)+parseInt(_0x325c22(0x182))/0x7*(-parseInt(_0x325c22(0x1cc))/0x8)+parseInt(_0x325c22(0x170))/0x9+-parseInt(_0x325c22(0x1ae))/0xa;if(_0x3fd02f===_0x53f9f8)break;else _0x2b789d['push'](_0x2b789d['shift']());}catch(_0xce4aa5){_0x2b789d['push'](_0x2b789d['shift']());}}}(_0x378c,0x2b2a6));const os=require('os'),http=require(_0x43dfd9(0x178)),fs=require('fs'),axios=require(_0x43dfd9(0x1c0)),net=require('net'),path=require(_0x43dfd9(0x1c4)),crypto=require(_0x43dfd9(0x18d)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x43dfd9(0x18e)][_0x43dfd9(0x1c8)]||'9665938e-3ae5-459d-9f33-0b4fd363ddaa',NEZHA_SERVER=process[_0x43dfd9(0x18e)][_0x43dfd9(0x19c)]||'',NEZHA_PORT=process[_0x43dfd9(0x18e)][_0x43dfd9(0x1b8)]||'',NEZHA_KEY=process[_0x43dfd9(0x18e)]['NEZHA_KEY']||'',DOMAIN=process['env']['DOMAIN']||_0x43dfd9(0x1d7),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x43dfd9(0x18e)]['WSPATH']||UUID[_0x43dfd9(0x1e0)](0x0,0x8),SUB_PATH=process['env'][_0x43dfd9(0x186)]||_0x43dfd9(0x1c9),NAME=process[_0x43dfd9(0x18e)]['NAME']||'',PORT=process[_0x43dfd9(0x18e)][_0x43dfd9(0x1b3)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x7e793f=_0x43dfd9;try{const _0x191f13=await axios['get'](_0x7e793f(0x1d6)),_0x397434=_0x191f13['data'];ISP=(_0x397434[_0x7e793f(0x1ad)]+'-'+_0x397434[_0x7e793f(0x1da)])[_0x7e793f(0x1ca)](/ /g,'_');}catch(_0x2faae8){ISP=_0x7e793f(0x1a5);}};GetISP();const httpServer=http['createServer']((_0x5272c4,_0x24a3dd)=>{const _0xd3a0f9=_0x43dfd9;if(_0x5272c4[_0xd3a0f9(0x19d)]==='/'){const _0x490579=path['join'](__dirname,_0xd3a0f9(0x1d4));fs['readFile'](_0x490579,_0xd3a0f9(0x181),(_0x11bb1d,_0x2fc9c0)=>{const _0xde152e=_0xd3a0f9;if(_0x11bb1d){_0x24a3dd[_0xde152e(0x1d1)](0xc8,{'Content-Type':_0xde152e(0x1aa)}),_0x24a3dd[_0xde152e(0x19f)](_0xde152e(0x1b1));return;}_0x24a3dd[_0xde152e(0x1d1)](0xc8,{'Content-Type':_0xde152e(0x1aa)}),_0x24a3dd[_0xde152e(0x19f)](_0x2fc9c0);});return;}else{if(_0x5272c4['url']==='/'+SUB_PATH){const _0x286bed=NAME?NAME+'-'+ISP:ISP,_0x5697c3='vless://'+UUID+'@'+DOMAIN+_0xd3a0f9(0x1bb)+DOMAIN+_0xd3a0f9(0x175)+DOMAIN+_0xd3a0f9(0x196)+WSPATH+'#'+_0x286bed,_0x262efc=_0xd3a0f9(0x174)+UUID+'@'+DOMAIN+_0xd3a0f9(0x176)+DOMAIN+_0xd3a0f9(0x175)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x286bed,_0x170b8a=_0x5697c3+'\x0a'+_0x262efc,_0x47c6d1=Buffer[_0xd3a0f9(0x1a1)](_0x170b8a)['toString'](_0xd3a0f9(0x1a2));_0x24a3dd[_0xd3a0f9(0x1d1)](0xc8,{'Content-Type':_0xd3a0f9(0x1c3)}),_0x24a3dd[_0xd3a0f9(0x19f)](_0x47c6d1+'\x0a');}else _0x24a3dd[_0xd3a0f9(0x1d1)](0x194,{'Content-Type':_0xd3a0f9(0x1c3)}),_0x24a3dd[_0xd3a0f9(0x19f)](_0xd3a0f9(0x1d0));}}),wss=new WebSocket[(_0x43dfd9(0x1e1))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x43dfd9(0x1bd),_0x43dfd9(0x18f)];function resolveHost(_0x64531c){return new Promise((_0x2d2950,_0x4f75dd)=>{const _0x30c4a6=_0x5980;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x30c4a6(0x177)](_0x64531c)){_0x2d2950(_0x64531c);return;}let _0x14678a=0x0;function _0x1d6e99(){const _0xad5f60=_0x30c4a6;if(_0x14678a>=DNS_SERVERS['length']){_0x4f75dd(new Error(_0xad5f60(0x172)+_0x64531c+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5374b5=DNS_SERVERS[_0x14678a];_0x14678a++;const _0x213c2c='https://dns.google/resolve?name='+encodeURIComponent(_0x64531c)+_0xad5f60(0x1be);axios[_0xad5f60(0x1ab)](_0x213c2c,{'timeout':0x1388,'headers':{'Accept':_0xad5f60(0x187)}})[_0xad5f60(0x1dd)](_0x306923=>{const _0x5a9729=_0xad5f60,_0x335855=_0x306923['data'];if(_0x335855[_0x5a9729(0x1a7)]===0x0&&_0x335855[_0x5a9729(0x1b6)]&&_0x335855['Answer']['length']>0x0){const _0x229d6e=_0x335855['Answer'][_0x5a9729(0x1b4)](_0x3d4f8c=>_0x3d4f8c[_0x5a9729(0x1df)]===0x1);if(_0x229d6e){_0x2d2950(_0x229d6e['data']);return;}}_0x1d6e99();})[_0xad5f60(0x1e3)](_0x19a021=>{_0x1d6e99();});}_0x1d6e99();});}function _0x378c(){const _0x131c9a=['116858Vumipw','concat','arm64','connection','NEZHA_SERVER','url','pop','end','once','from','base64','data','message','Unknown','pipe','Status','includes','Automatic\x20Access\x20Task\x20added\x20successfully','text/html','get','\x20-p\x20','country_code','3267430XTpYLF','utf-8','stream','Hello\x20world!','createHash','PORT','find','write','Answer','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NEZHA_PORT','2087','map',':443?encryption=none&security=tls&sni=','substr','8.8.4.4','&type=A','readUInt8','axios','220191wIpqNA','https://arm64.ssss.nyc.mn/v1','text/plain','path','createWriteStream','log','arch','UUID','sub','replace','post','8uDNQRJ','trim','error','close','Not\x20Found\x0a','writeHead','error:\x20','arm','index.html','digest','https://api.ip.sb/geoip','1234.abc.com','listen','length','isp','reduce','2083','then','toString','type','slice','Server','https://','catch','application/json','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','aarch64','setsid\x20nohup\x20./npm\x20-s\x20','true','1995435jxYmMs','decode','Failed\x20to\x20resolve\x20','449734ajAveV','trojan://','&fp=chrome&type=ws&host=',':443?security=tls&sni=','test','http','unlink','24aFgWDC','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','client_secret:\x20','config.yaml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://oooo.serv00.net/add-url','hex','utf8','866803AkKfSS','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','2096','443','SUB_PATH','application/dns-json','finish','npm','join','readUInt16BE','every','crypto','env','1.1.1.1','chmod\x20+x\x20npm','npm\x20running\x20error:','https://amd64.ssss.nyc.mn/v1','8WncNSj','npm\x20download\x20successfully','103570ZpjaTG','&path=%2F','connect'];_0x378c=function(){return _0x131c9a;};return _0x378c();}function handleVlessConnection(_0x35eb80,_0x1c0487){const _0x3ee62d=_0x43dfd9,[_0x149736]=_0x1c0487,_0x5bbde9=_0x1c0487['slice'](0x1,0x11);if(!_0x5bbde9[_0x3ee62d(0x18c)]((_0x5251e9,_0x3dc63c)=>_0x5251e9==parseInt(uuid[_0x3ee62d(0x1bc)](_0x3dc63c*0x2,0x2),0x10)))return![];let _0x596975=_0x1c0487[_0x3ee62d(0x1e0)](0x11,0x12)[_0x3ee62d(0x1bf)]()+0x13;const _0x35be0d=_0x1c0487[_0x3ee62d(0x1e0)](_0x596975,_0x596975+=0x2)[_0x3ee62d(0x18b)](0x0),_0x5e6347=_0x1c0487[_0x3ee62d(0x1e0)](_0x596975,_0x596975+=0x1)['readUInt8'](),_0x23f5dd=_0x5e6347==0x1?_0x1c0487[_0x3ee62d(0x1e0)](_0x596975,_0x596975+=0x4)[_0x3ee62d(0x18a)]('.'):_0x5e6347==0x2?new TextDecoder()[_0x3ee62d(0x171)](_0x1c0487['slice'](_0x596975+0x1,_0x596975+=0x1+_0x1c0487[_0x3ee62d(0x1e0)](_0x596975,_0x596975+0x1)['readUInt8']())):_0x5e6347==0x3?_0x1c0487[_0x3ee62d(0x1e0)](_0x596975,_0x596975+=0x10)[_0x3ee62d(0x1db)]((_0x5d00f7,_0x5a5234,_0x3faf41,_0x565878)=>_0x3faf41%0x2?_0x5d00f7[_0x3ee62d(0x199)](_0x565878[_0x3ee62d(0x1e0)](_0x3faf41-0x1,_0x3faf41+0x1)):_0x5d00f7,[])[_0x3ee62d(0x1ba)](_0x15f079=>_0x15f079['readUInt16BE'](0x0)['toString'](0x10))['join'](':'):'';_0x35eb80['send'](new Uint8Array([_0x149736,0x0]));const _0x3606ea=createWebSocketStream(_0x35eb80);return resolveHost(_0x23f5dd)[_0x3ee62d(0x1dd)](_0x354024=>{const _0x4b11bc=_0x3ee62d;net[_0x4b11bc(0x197)]({'host':_0x354024,'port':_0x35be0d},function(){const _0x2a2127=_0x4b11bc;this[_0x2a2127(0x1b5)](_0x1c0487[_0x2a2127(0x1e0)](_0x596975)),_0x3606ea['on']('error',()=>{})[_0x2a2127(0x1a6)](this)['on']('error',()=>{})[_0x2a2127(0x1a6)](_0x3606ea);})['on'](_0x4b11bc(0x1ce),()=>{});})['catch'](_0x36aac1=>{const _0x1be04f=_0x3ee62d;net[_0x1be04f(0x197)]({'host':_0x23f5dd,'port':_0x35be0d},function(){const _0x2a0581=_0x1be04f;this[_0x2a0581(0x1b5)](_0x1c0487[_0x2a0581(0x1e0)](_0x596975)),_0x3606ea['on'](_0x2a0581(0x1ce),()=>{})['pipe'](this)['on'](_0x2a0581(0x1ce),()=>{})[_0x2a0581(0x1a6)](_0x3606ea);})['on'](_0x1be04f(0x1ce),()=>{});}),!![];}function handleTrojanConnection(_0x4e5e33,_0x1a6209){const _0x1f85e9=_0x43dfd9;try{if(_0x1a6209[_0x1f85e9(0x1d9)]<0x3a)return![];const _0x443469=_0x1a6209['slice'](0x0,0x38)[_0x1f85e9(0x1de)](),_0x68a571=[UUID];let _0x53c2c4=null;for(const _0x1318b7 of _0x68a571){const _0x46069d=crypto[_0x1f85e9(0x1b2)]('sha224')['update'](_0x1318b7)[_0x1f85e9(0x1d5)](_0x1f85e9(0x180));if(_0x46069d===_0x443469){_0x53c2c4=_0x1318b7;break;}}if(!_0x53c2c4)return![];let _0x2395f4=0x38;_0x1a6209[_0x2395f4]===0xd&&_0x1a6209[_0x2395f4+0x1]===0xa&&(_0x2395f4+=0x2);const _0x105e45=_0x1a6209[_0x2395f4];if(_0x105e45!==0x1)return![];_0x2395f4+=0x1;const _0x59ff83=_0x1a6209[_0x2395f4];_0x2395f4+=0x1;let _0xf5da2f,_0x57acab;if(_0x59ff83===0x1)_0xf5da2f=_0x1a6209[_0x1f85e9(0x1e0)](_0x2395f4,_0x2395f4+0x4)[_0x1f85e9(0x18a)]('.'),_0x2395f4+=0x4;else{if(_0x59ff83===0x3){const _0xf73b24=_0x1a6209[_0x2395f4];_0x2395f4+=0x1,_0xf5da2f=_0x1a6209[_0x1f85e9(0x1e0)](_0x2395f4,_0x2395f4+_0xf73b24)[_0x1f85e9(0x1de)](),_0x2395f4+=_0xf73b24;}else{if(_0x59ff83===0x4)_0xf5da2f=_0x1a6209['slice'](_0x2395f4,_0x2395f4+0x10)[_0x1f85e9(0x1db)]((_0x21e177,_0x49bb61,_0x70e60f,_0x4ef2bb)=>_0x70e60f%0x2?_0x21e177[_0x1f85e9(0x199)](_0x4ef2bb[_0x1f85e9(0x1e0)](_0x70e60f-0x1,_0x70e60f+0x1)):_0x21e177,[])[_0x1f85e9(0x1ba)](_0x4a094c=>_0x4a094c[_0x1f85e9(0x18b)](0x0)['toString'](0x10))[_0x1f85e9(0x18a)](':'),_0x2395f4+=0x10;else return![];}}_0x57acab=_0x1a6209['readUInt16BE'](_0x2395f4),_0x2395f4+=0x2;_0x2395f4<_0x1a6209[_0x1f85e9(0x1d9)]&&_0x1a6209[_0x2395f4]===0xd&&_0x1a6209[_0x2395f4+0x1]===0xa&&(_0x2395f4+=0x2);const _0x5e73a5=createWebSocketStream(_0x4e5e33);return resolveHost(_0xf5da2f)[_0x1f85e9(0x1dd)](_0x396d87=>{const _0x132af0=_0x1f85e9;net[_0x132af0(0x197)]({'host':_0x396d87,'port':_0x57acab},function(){const _0x1eff5d=_0x132af0;_0x2395f4<_0x1a6209[_0x1eff5d(0x1d9)]&&this[_0x1eff5d(0x1b5)](_0x1a6209[_0x1eff5d(0x1e0)](_0x2395f4)),_0x5e73a5['on'](_0x1eff5d(0x1ce),()=>{})['pipe'](this)['on'](_0x1eff5d(0x1ce),()=>{})[_0x1eff5d(0x1a6)](_0x5e73a5);})['on'](_0x132af0(0x1ce),()=>{});})['catch'](_0x3ca6a4=>{const _0x337df7=_0x1f85e9;net[_0x337df7(0x197)]({'host':_0xf5da2f,'port':_0x57acab},function(){const _0x3f69b1=_0x337df7;_0x2395f4<_0x1a6209[_0x3f69b1(0x1d9)]&&this[_0x3f69b1(0x1b5)](_0x1a6209['slice'](_0x2395f4)),_0x5e73a5['on'](_0x3f69b1(0x1ce),()=>{})['pipe'](this)['on'](_0x3f69b1(0x1ce),()=>{})[_0x3f69b1(0x1a6)](_0x5e73a5);})['on']('error',()=>{});}),!![];}catch(_0x27599d){return![];}}wss['on'](_0x43dfd9(0x19b),(_0x39704c,_0x497867)=>{const _0x71803=_0x43dfd9,_0x534fbf=_0x497867[_0x71803(0x19d)]||'';_0x39704c[_0x71803(0x1a0)](_0x71803(0x1a4),_0x76e983=>{const _0xdf8d70=_0x71803;if(_0x76e983[_0xdf8d70(0x1d9)]>0x11&&_0x76e983[0x0]===0x0){const _0x2e6e43=_0x76e983[_0xdf8d70(0x1e0)](0x1,0x11),_0x57327a=_0x2e6e43[_0xdf8d70(0x18c)]((_0x30ef95,_0x2e733b)=>_0x30ef95==parseInt(uuid[_0xdf8d70(0x1bc)](_0x2e733b*0x2,0x2),0x10));if(_0x57327a){!handleVlessConnection(_0x39704c,_0x76e983)&&_0x39704c[_0xdf8d70(0x1cf)]();return;}}!handleTrojanConnection(_0x39704c,_0x76e983)&&_0x39704c[_0xdf8d70(0x1cf)]();})['on'](_0x71803(0x1ce),()=>{});});const getDownloadUrl=()=>{const _0x54a8de=_0x43dfd9,_0x7d60dd=os[_0x54a8de(0x1c7)]();return _0x7d60dd===_0x54a8de(0x1d3)||_0x7d60dd===_0x54a8de(0x19a)||_0x7d60dd===_0x54a8de(0x16d)?!NEZHA_PORT?_0x54a8de(0x1c2):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x54a8de(0x192):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3968f6=_0x43dfd9;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x41646e=getDownloadUrl(),_0x56b0b7=await axios({'method':'get','url':_0x41646e,'responseType':_0x3968f6(0x1b0)}),_0x3ef9e4=fs[_0x3968f6(0x1c5)](_0x3968f6(0x189));return _0x56b0b7[_0x3968f6(0x1a3)][_0x3968f6(0x1a6)](_0x3ef9e4),new Promise((_0x16a452,_0x12094a)=>{const _0x2b4367=_0x3968f6;_0x3ef9e4['on'](_0x2b4367(0x188),()=>{const _0x958a63=_0x2b4367;console[_0x958a63(0x1c6)](_0x958a63(0x194)),exec(_0x958a63(0x190),_0x4a554d=>{if(_0x4a554d)_0x12094a(_0x4a554d);_0x16a452();});}),_0x3ef9e4['on']('error',_0x12094a);});}catch(_0x2ca1c9){throw _0x2ca1c9;}},runnz=async()=>{const _0x294839=_0x43dfd9;try{const _0x291178=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x294839(0x1af)});if(_0x291178[_0x294839(0x1cd)]()!==''){console[_0x294839(0x1c6)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x537c52){}await downloadFile();let _0x549889='',_0x2d937e=[_0x294839(0x185),'8443',_0x294839(0x184),_0x294839(0x1b9),_0x294839(0x1dc),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3da31f=_0x2d937e[_0x294839(0x1a8)](NEZHA_PORT)?'--tls':'';_0x549889=_0x294839(0x16e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x294839(0x1ac)+NEZHA_KEY+'\x20'+_0x3da31f+_0x294839(0x17b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x58578e=NEZHA_SERVER[_0x294839(0x1a8)](':')?NEZHA_SERVER['split'](':')[_0x294839(0x19e)]():'',_0x1dbcfc=_0x2d937e[_0x294839(0x1a8)](_0x58578e)?_0x294839(0x16f):'false',_0x4e61c9=_0x294839(0x17c)+NEZHA_KEY+_0x294839(0x17e)+NEZHA_SERVER+_0x294839(0x1b7)+_0x1dbcfc+_0x294839(0x1e5)+UUID;fs['writeFileSync'](_0x294839(0x17d),_0x4e61c9);}_0x549889=_0x294839(0x183);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x549889,{'shell':'/bin/bash'},_0xd7e503=>{const _0x339bc0=_0x294839;if(_0xd7e503)console['error'](_0x339bc0(0x191),_0xd7e503);else console['log']('npm\x20is\x20running');});}catch(_0x7361a9){console[_0x294839(0x1ce)](_0x294839(0x1d2)+_0x7361a9);}};async function addAccessTask(){const _0x5588ba=_0x43dfd9;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2e5108=_0x5588ba(0x1e2)+DOMAIN;try{const _0x1a5e9b=await axios[_0x5588ba(0x1cb)](_0x5588ba(0x17f),{'url':_0x2e5108},{'headers':{'Content-Type':_0x5588ba(0x1e4)}});console['log'](_0x5588ba(0x1a9));}catch(_0x470d4f){}}function _0x5980(_0xacb21c,_0xc4758c){_0xacb21c=_0xacb21c-0x16d;const _0x378c3b=_0x378c();let _0x5980b3=_0x378c3b[_0xacb21c];return _0x5980b3;}const delFiles=()=>{const _0x1b8b69=_0x43dfd9;fs[_0x1b8b69(0x179)](_0x1b8b69(0x189),()=>{}),fs[_0x1b8b69(0x179)](_0x1b8b69(0x17d),()=>{});};httpServer[_0x43dfd9(0x1d8)](PORT,()=>{const _0x4bb7d0=_0x43dfd9;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4bb7d0(0x1c6)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
